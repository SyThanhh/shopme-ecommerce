package com.shopme.admin;

import java.nio.file.Path;
import java.nio.file.Paths;

import org.springframework.context.annotation.Configuration;
import org.springframework.web.servlet.config.annotation.ResourceHandlerRegistry;
import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;


// cấu hình class này để hiển thị ảnh bên clients
@Configuration
public class MvcConfig implements WebMvcConfigurer {

	@Override
	public void addResourceHandlers(ResourceHandlerRegistry registry) {
	    // Tên thư mục chứa ảnh người dùng
	    String dirName = "user-photos";
	    
	    // Tạo đường dẫn tới thư mục ảnh người dùng
	    Path userPhotoDir = Paths.get(dirName);
	    
	    // Lấy đường dẫn tuyệt đối của thư mục ảnh người dùng
	    String userPhotosPath = userPhotoDir.toFile().getAbsolutePath();
	    
	    // Cấu hình bộ xử lý tài nguyên cho các ảnh người dùng
	    registry.addResourceHandler("/" + dirName + "/**")
	        .addResourceLocations("file:/" + userPhotosPath + "/");
	    
	    
	    String categoryDirName = "user-photos";
	    
	    // Tạo đường dẫn tới thư mục ảnh người dùng
	    Path categoryPhotoDir = Paths.get(dirName);
	    
	    // Lấy đường dẫn tuyệt đối của thư mục ảnh người dùng
	    String categoryPhotosPath = categoryPhotoDir.toFile().getAbsolutePath();
	    
	    // Cấu hình bộ xử lý tài nguyên cho các ảnh người dùng
	    registry.addResourceHandler("/" + dirName + "/**")
	        .addResourceLocations("file:/" + userPhotosPath + "/");
	}


}
